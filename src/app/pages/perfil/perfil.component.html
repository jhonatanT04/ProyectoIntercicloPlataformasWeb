<div class="container">
  <div class="hader-main">
    <h2 (click)=" this.router.navigate([''])">
      <img src="logoPK.png" alt="logo">
      Parqueadero UPS

    </h2>
    <p (click)="cerrarSeccion()">
      <svg class="icon-perfil" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"
        fill="#FFFFFF">
        <path
          d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z" />
      </svg>
      Cerrar sesion
    </p>
  </div>
  <div class="container-cuerpo">
    <div class="card-client">
      <div class="datos">
        <h3>Mis Datos</h3>
        <svg class="icon-perfil" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"
          fill="#FFFFFF">
          <path
            d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z" />
        </svg>
        <h2>{{nombre}} {{apellido}}</h2>
        <p class="cliente">
          <span>Correo Electronico: {{correo}}</span>
          <span>Telefono: {{telefono}}</span>
        </p>
        <div class="botns">
          <button (click)="ActualizarPerfil = true">Actualizar Perfil</button>
        </div>
      </div>
    </div>
    <div class="contratos-container">
      <table border="1">
        <thead>
          <tr *ngIf="contratos.length !== 0">
            <th>Nombre del Espacio</th>
            <th>Placa</th>
            <th>Fecha de inicio</th>
            <th>Fecha de fin</th>
            <th>Tarifa</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let contrato of contratos">
            <td>{{ contrato.nombreE }}</td>
            <td>{{ contrato.placa }}</td>
            <td>{{ contrato.fechaInicio }}</td>
            <td>{{ contrato.fechaFin }}</td>
            <td>{{ contrato.tarifa.costo }}</td>
          </tr>
          <tr *ngIf="contratos.length === 0">
            <td>No tienes contratos registrados.</td>
          </tr>
        </tbody>
      </table>

    </div>
    <div class="ticket-container">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Placa</th>
            <th>Fecha de Ingreso</th>
            <th>Fecha de Salida</th>
            <th>Valor Total</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>ABC-123</td>
            <td>2025-01-01 08:00</td>
            <td>2025-01-01 10:00</td>
            <td>$10.00</td>
          </tr>
          <tr>
            <td>2</td>
            <td>XYZ-789</td>
            <td>2025-01-02 09:30</td>
            <td>2025-01-02 11:00</td>
            <td>$12.50</td>
          </tr>
          <tr>
            <td>3</td>
            <td>LMN-456</td>
            <td>2025-01-03 07:45</td>
            <td>2025-01-03 09:15</td>
            <td>$8.75</td>
          </tr>
        </tbody>
      </table>
      <button class="btn-newTicket" (click)="abrirNewTicket()">
        Nuevo ticket
      </button>
    </div>
  </div>
  <div class="container-newTicket" *ngIf="newTickt">
    <div class="target-container-newTicket">
      <h3 *ngIf="newTickt&&!selectHoraIngreso">Seleccione un espacio</h3>
      <p *ngIf="newTickt&&!selectHoraIngreso">Para continuar</p>
      <button (click)="abrirNewTicket()" class="btn-exit-ticket">
        <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0,0,256,256">
          <g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(8.53333,8.53333)"><path d="M7,4c-0.25587,0 -0.51203,0.09747 -0.70703,0.29297l-2,2c-0.391,0.391 -0.391,1.02406 0,1.41406l7.29297,7.29297l-7.29297,7.29297c-0.391,0.391 -0.391,1.02406 0,1.41406l2,2c0.391,0.391 1.02406,0.391 1.41406,0l7.29297,-7.29297l7.29297,7.29297c0.39,0.391 1.02406,0.391 1.41406,0l2,-2c0.391,-0.391 0.391,-1.02406 0,-1.41406l-7.29297,-7.29297l7.29297,-7.29297c0.391,-0.39 0.391,-1.02406 0,-1.41406l-2,-2c-0.391,-0.391 -1.02406,-0.391 -1.41406,0l-7.29297,7.29297l-7.29297,-7.29297c-0.1955,-0.1955 -0.45116,-0.29297 -0.70703,-0.29297z"></path></g></g>
          </svg>
      </button>
      
      <div class="espacios-grid" *ngIf="newTickt&&!selectHoraIngreso">
        <div *ngFor="let espacio of espacios; let i = index">
          <div class="espacio-card" *ngIf="espacio.estado!=='D'"[ngClass]="{'reservado': espacio.estado === 'R', 'ocupado': espacio.estado === 'O'}">
            <div class="espacio-info" >
              <h4>{{ espacio.nombre.length > 6 ? 'E' + (i + 1) : espacio.nombre }}</h4>
            </div>
          </div>
          <div class="espacio-card" (click)="selecionarEspacio(espacio)" *ngIf="espacio.estado==='D' " [ngClass]="{'disponible': espacio.estado === 'D'} " [class.select]="espacio === espacioSeleccionado">
            <div class="espacio-info" >
              <h4>{{ espacio.nombre.length > 6 ? 'E' + (i + 1) : espacio.nombre }}</h4>
            </div>
          </div>
        </div>
      </div>
      <div>
        <button class="next-ticket-select" *ngIf="selectEspacio&&!selectHoraIngreso" (click)="selectHoraTicket()" >
          Continuara
        </button>
        <button class="next-ticket-notSelect" *ngIf="!selectEspacio&&!selectHoraIngreso">
          Continuar
        </button>
      </div>
      <div class="container-time" *ngIf="selectHoraIngreso">

        <h3>Ingrese la hora de entrada</h3>
        <div class="espacio-seleccionado">
          <div class="espacio-info" >
            <h4>{{espacioSeleccionado?.nombreEspacio }}</h4>
          </div>
        </div>
        
        <input class="input-clock" type="time" [(ngModel)]="horaIngreso" name="horaIngreso" id="horaIngreso" required>  
        <!-- <p *ngIf="selectHoraIngreso&& validarHoraIngreso()">aa</p> -->
        <input class="input-placa" type="text" [(ngModel)]="placa" name="horaIngreso" id="horaIngreso" placeholder="eje. ANIA-123" required>  
        <button class="crear-ticket invalido" (click)="crearTicket()" *ngIf="selectHoraIngreso&&validarHoraIngreso()"  >Crear ticket</button>
        <button class="crear-ticket valido" *ngIf="selectHoraIngreso&&!validarHoraIngreso()" >Crear ticket</button>
      </div>
    </div>
  </div>
  <div *ngIf="ActualizarPerfil" class="modal">
    <div class="contenido-modal">
      <span class="close" (click)="actualizar(false)">&times;</span>
      <app-actualizar-perfil (actualizado)="actualizar($event)"></app-actualizar-perfil>
    </div>

  </div>
</div>





